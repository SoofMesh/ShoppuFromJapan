<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Shoppu From Japan - A Shopping Proxy Service.</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/ShopLogo_V2.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script> -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
   
  <!-- Bootstrap -->
   <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
   <!-- Bootstrap rtl -->
   <!--<link href="assets/bootstrap-rtl/bootstrap-rtl.min.css" rel="stylesheet" type="text/css"/>-->
   <!-- Pe-icon-7-stroke -->
   <link href="assets/pe-icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet" type="text/css"/>
   <!-- style css -->
   <link href="assets/css/stylehealth.min.css" rel="stylesheet" type="text/css"/>
   <!-- Theme style rtl -->
   <!--<link href="assets/dist/css/stylehealth-rtl.css" rel="stylesheet" type="text/css"/>-->

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="sticky-top">
    <div class="container d-flex align-items-center">

        <div class="logo mr-auto">
          <h1 class="text-light"><a href="index.html" style="color: #fdc134;">Shoppu From Japan!<span style="color: white;">.</span></a></h1> 
          <!-- Uncomment below if you prefer to use an image logo -->
          <!-- <a href="index.html"><img src="assets/img/ShopLogo_V2.png" alt=""></a> -->
        </div>

        <nav class="nav-menu d-none d-lg-block">
          <ul>
            <li class="get-started"><a href="index.html">Home</a></li>
            <li class="get-started"><a type="button" data-toggle="modal" data-target="#exampleModalCenter">Sign In / Sign Up</a></li>
          </ul>
        </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section class="requestPage">

    <div class="section-title">
      <h2 data-aos="fade-in">Let's Buy It</h2>
      <p data-aos="fade-in">Let's Shoppu! Provide URL for the product you want to buy.</p>
    </div>
                             <!-- MultiStep Form -->     

      <div class="container-fluid" id="grad1">
        <div class="row justify-content-center mt-0">
            <div class="col-11 col-sm-9 col-md-7 col-lg-10 text-center p-0 mt-3 mb-2">
                <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2><strong>Order Processing Form</strong></h2>
                    <div class="row">
                        <div class="col-md-12 mx-0">
                            <form id="msform">
                                <!-- progressbar -->
                                <ul id="progressbar">
                                    <li class="active" id="account"><strong>Product Details</strong></li>
                                    <li id="personal"><strong>Cart</strong></li>
                                    <li id="payment"><strong>Checkout</strong></li>
                                    <li id="confirm"><strong>Complete</strong></li>
                                </ul> <!-- fieldsets -->
                                <fieldset>
                                      <div class="form-card">
                                        <h2 class="fs-title">Product URL You Want To Buy</h2>
                                        <hr>
                                        <input type="url" id="scrappUrl" name="url" placeholder="Enter URL" required/> 
                                        <input type="text" id="scrappProduct" name="pname" placeholder="Product Name" />
                                        <input type="number" id="scrappQuant" name="lname" placeholder="Quantity" /> 
                                        <input type="text" id="scrappUnitPrice" name="phno" placeholder="Item Price" /> 
                                        <input type="text" id="scrappShipAdd" name="phno_2" placeholder="Shipping Address (House #, Street etc.)" />
                                        <input type="email" id="scrappEmail" name="phno_2" placeholder="Email"  />
                                        <input type="text" id="scrappContact" name="phno_2" placeholder="Contact No."  />
                                      </div> 
                                      <button type="button" id="pressNext" class="btn btn-warning next action-button">Next</button>
                                </fieldset>
                                <fieldset>
                                      <div class="form-card">
                                        <h2 class="fs-title">Product Details</h2> 
                                        <table class="table table-bordered" id="displayData">
                                          <thead id="test">
                                            <tr>
                                              <th scope="col">Product Name</th>
                                              <th scope="col">Product Shop</th>
                                              <th scope="col">Image</th>
                                              <th scope="col">Quantity</th>
                                              <th scope="col">Unit Price</th>
                                              <th scope="col">Total Price</th>
                                              <th scope="col">Edit / Delete</th>
                                            </tr>
                                          </thead>
                                          <tbody>
                                                                                  
                                          </tbody>
                                        </table>
                                        
                                        <div class="card">
                                          <div class="card-header">
                                            Summary
                                          </div>
                                          <table class="table table-striped">                                           
                                            <tbody>
                                              <tr>
                                                <th scope="row">Item Price</th>                                               
                                                <td>12345</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Shipping Charges <span style="color: skyblue; font-weight: normal;">(Estimated)</span></th>                                                
                                                <td>800</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Services Charges <span style="color: skyblue; font-weight: normal;">(15%)</span></th>
                                                <td>1234</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Packing Fee</th>
                                                <td>1000</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Shop Fee <span style="color: skyblue; font-weight: normal;">(If order is less than ¥5000)</span></th>
                                                <td>800</td>
                                              </tr> 
                                              <tr>
                                                <th scope="row">Estimated Total</th>
                                                <td>1234</td>
                                              </tr> 
                                            </tbody>
                                          </table>
                                          <span style="float: left;"><input type="radio" value="Pre"></span>
                                          <span>Note: Import duties, taxes and charges are not included in the item price or shipping fee.
                                            These charges are buyers responsibility.</span>
                                            
                                        </div>
                                        

                                      </div> 
                                      <button type="button" id="pressAddAnother" class="btn btn-warning previous action-button-previous">Add another ..</button>
                                      <button type="button" id="pressConfirm" class="btn btn-warning next action-button">Confirm</button>
                                </fieldset>
                                <fieldset>
                                    <div class="form-card">
                                        
                                        <h2 class="fs-title">Checkout</h2>
                                        <div class="card">
                                          <div class="card-header">
                                            <h3>Invoice</h3>
                                          </div>
                                          <table class="table table-striped">                                           
                                            <tbody>
                                              <tr>
                                                <th scope="row">Item Price</th>                                               
                                                <td>12345</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Shipping Charges <span style="color: skyblue; font-weight: normal;">(Estimated)</span></th>                                                
                                                <td>3000</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Services Charges <span style="color: skyblue; font-weight: normal;">(15%)</span></th>
                                                <td>1234</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Packing Fee</th>
                                                <td>1000</td>
                                              </tr>
                                              <tr>
                                                <th scope="row">Shop Fee <span style="color: skyblue; font-weight: normal;">(¥800 If order is less than or equal to ¥5000)</span></th>
                                                <td>800</td>
                                              </tr> 
                                              <tr>
                                                <th scope="row">Estimated Total</th>
                                                <td>1234</td>
                                              </tr>  
                                            </tbody>
                                          </table>
                                          <span>Note: Import duties, taxes and charges are not included in the item price or shipping fee.
                                            These charges are buyers responsibility.</span>
                                        </div>

                                    </div> 
                                    <button type="button" class="btn btn-warning previous action-button-previous">Previous</button>
                                    <button type="button" class="btn btn-warning action-button" style="width: 15%;">Pay Wtih PayPal</button>
                                    <button type="button" id="pressStripe" class="btn btn-warning action-button" style="width: 15%;">Pay With Credit Card</button>
                                </fieldset>
                                <fieldset>
                                    <div class="form-card">
                                        <h2 class="fs-title text-center">Success !</h2> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-3"> 
                                              <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image">
                                             </div>
                                        </div> <br><br>
                                        <div class="row justify-content-center">
                                            <div class="col-7 text-center">
                                              <input type="button" name="addAnother" class="action-button" value="Add Another" />  
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
  </section><!-- End Hero -->

  

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">

      <div class="container" data-aos="fade-up">

        

        <div class="row footer-newsletter justify-content-center">
          <div class="col-lg-6">
            <form action="" method="post">
              <input type="email" name="email" placeholder="Enter your Email"><input type="submit" value="Subscribe">
            </form>
          </div>
        </div>

        <div class="social-links">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>

        <div style="margin-top: 30px; font-size: 20px;">
          <a href="https://zenterninternships.com/">特定商取引法</a>
        </div>

      </div>
    </div>

    <div class="container footer-bottom clearfix">
      <div class="copyright">
        &copy; Copyright <strong><span>Zentern</span></strong>. All Rights Reserved
      </div>
      <div class="credits">

        Designed by <a href="">Team Zentern</a>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>


                    <!--  Modal LogIn starts here -->
  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
    Launch demo modal
  </button>
  
                        <!-- Modal -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title text-center" id="exampleModalLongTitle">Sign In</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="panel-body">
            <form action="" id="loginForm" novalidate>
                <div class="form-group">
                    <label class="control-label" for="username">Username</label>
                    <input type="text" placeholder="example@gmail.com" title="Please enter you username" required="" value="" name="username" id="username" class="form-control">
                    <span class="help-block small">Your unique username to app</span>
                </div>
                <div class="form-group">
                    <label class="control-label" for="password">Password</label>
                    <input type="password" title="Please enter your password" placeholder="******" required="" value="" name="password" id="password" class="form-control">
                    <span class="help-block small">Your strong password</span>
                </div>
                <div>
                    <button class="btn btn-primary" data-dismiss="modal">Login</button> 
                    <!-- <a class="btn btn-warning" href="">Register</a> -->
                </div>
            </form>             
        </div>
        </div>
      </div>
    </div>
  </div>  
                <!--  Modal LogIn ends here -->


  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- jQuery -->
  <!-- <script src="assets/plugins/jQuery/jquery-1.12.4.min.js" type="text/javascript"></script> -->
  
 <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>  -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> 
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> 
 
</body>
</html>

<script>


                  // global temporary Array for holding products in an Order
              var productsInOrder = [];

                  // global temporary Array for holding products in an Order
              var eachShopFee = {

              };

              
                  // declaring identifiers for handling DOM elements
              var pName = null;
              var pUrl = null;
              var imgSrc = null;
              var shopName = null;
              var quant = null;
              var unitP = null;
              var shipAdd = null;
              var email = null;
              var contact = null;
              var totalPrice = null;

  async function display()
  {
          console.log("you reached ...");

          var url = null;
         // var regex = new RegExp(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/g);
        //  if(regex.test(pUrl.value)){

          if(pUrl.checkValidity()){
              console.log("Valid URL");

              url = encodeURIComponent(pUrl.value.toString());

                    console.log(url);

                    let scrappData = await fetch("/scrapp-api", {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Accept': 'application/json'
                                    },
                                body: JSON.stringify({url})
                        
                    }).then(res=>{
                        return res.json();                                
                      })

                      if(scrappData.status == 'ok')
                      {
                          if(!scrappData.image){
                            imgSrc = 'https://www.publicdomainpictures.net/pictures/280000/nahled/not-found-image-15383864787lu.jpg';
                          }
                          else{
                            imgSrc = scrappData.image;
                          }                          
                          pName.value = scrappData.title;                          
                          unitP.value = scrappData.price;
                          shopName = scrappData.shopName;
                      }
                        console.log(scrappData);              
          }
          else{
              console.log("in-Valid URL");
          }

  }

  async function logInUser(event){

        event.preventDefault();

        const logInEmail = document.getElementById("email").value;                                                
        const logInPassword = document.getElementById("password").value;

        const logInResult = await fetch("/logInUser-api", {
                                                            method: 'POST',
                                                            headers: {
                                                                'Content-Type': 'application/json'
                                                            },
                                                            body: JSON.stringify({
                                                                logInEmail,
                                                                logInPassword                                                                                                                      
                                                            })                
                                }).then(res=>res.json());
        console.log(logInResult); 
        console.log(logInResult.JWT);         

        if(logInResult.status === 'ok')
        {  
            localStorage.setItem('JWT', logInResult.JWT)
            alert("Log-In Successful .. Welcome");
            //window.location = '/';
        }
  }

                

                // Function for clearing Old Data from Form         
function clearOldData(){                       
              pUrl.value = null;
              pName.value = null;
              quant.value = null;
              unitP.value = null;
              shipAdd.value = null;
              email.value = null;
              contact.value = null;     
}

function addPerShopFee(shopName, totalPrice){

     /*--------------------------------Per Shop Fee Logic starts------------------------------*/ 

  // For the First Product in 'Order' array, Make it's ShopName as new Key of the Object 'eachShopFee'  
            if(productsInOrder.length == 0){

                eachShopFee[shopName] = totalPrice;
            }
  // For every new Product other than the First one, in 'Order' array
            else if(productsInOrder.length > 0){

                let total = totalPrice;
                let match = false;
                // For every new Product other than the First one, in 'Order' array, find it's match with previous existing Shop Names of the 'eachShopFee' Object
                productsInOrder.forEach(item=>{         

                      if(shopName == item.shopName)
                      {
                          total+= item.totalPrice;

                          eachShopFee[shopName] = total;

                          match = true;
                      }                        
                  })
                // if match is not Successful, make it's ShopName as new Key of the Object 'eachShopFee'
                if(!match){
                      
                      eachShopFee[shopName] = totalPrice;                          
                }
            }
     /*--------------------------------Per Shop Fee Logic ends--------------------------------*/

}

          // Deleting Product from temporary Order
async function deleteRow(e){
    let row = e.target.parentElement.parentElement;        
    let index = row.rowIndex;
    row.remove();

    productsInOrder.splice(index - 1, 1);
    console.log(productsInOrder);
}

                // Function for shifting Data from one View to another
function shiftData(){
              
              
              console.log("you are in ShifData");                

              unitP.value = unitP.value.replace('¥', '');  
              unitP.value = unitP.value.replace(',', ''); 
            
              if(quant.value == ""){
                    quant.value = 1;
              }

              totalPrice = Number(unitP.value) * Number(quant.value);

              console.log(productsInOrder.length);

                  addPerShopFee(shopName, totalPrice); // add perShopFee Logic for the new Product, in Order

              

                // adding Products to temporary global array          
              productsInOrder.push({
              url: encodeURIComponent(pUrl.value.toString()),
              productName: pName.value,
              image: imgSrc,
              shopName,
              quantity: quant.value,
              unitPrice: unitP.value,
              totalPrice
              }); 

                    // grabbing <tbody> element of Table
              var tbody = document.getElementById("displayData").children[1];

                    // creating new element <tr> of Table
              var tr = document.createElement("tr")

                    // setting innerHTML of new element <tr> 
                            tr.innerHTML = `<th scope="row">${pName.value}</th>
                                            <td>${shopName}</td>
                                            <td><img src="${imgSrc}"/></td>
                                            <td>${quant.value}</td>
                                            <td>${unitP.value}</td>
                                            <td>${totalPrice}</td>
                                            <td>
                                              <button type="button" class="btn btn-warning">Edit</button>
                                              <button type="button" onclick = "deleteRow(event)" class="btn btn-danger">Delete</button>
                                            </td>`;                 

                    // appending new element <tr> to <tbody> of Table            
                            tbody.appendChild(tr);

                            console.log("Per Shop Fee: ",eachShopFee);
                                               
}
async function placeOrder(){
      productsInOrder.forEach(item=>{

              console.log(item.url);                        //url
              console.log(item.productName);                //productName
              console.log(item.image);                      //image
              console.log(item.shopName);                   //shopName
              console.log(item.quantity);                   //quantity
              console.log(item.unitPrice);                  //unitPrice
              console.log(item.totalPrice);                 //totalPrice 

          //console.log(Object.keys(item));
      })

/*------------------------------------Posting temporary Order details to Server------------------------------------*/      
              await fetch("/orderRequest/place-Order", {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                productsInOrder,
                                eachShopFee,
                                shipAdd: shipAdd.value,
                                email: email.value,
                                contact: contact.value,
                                token: localStorage.getItem('JWT')                   
                            })                                      
                    }) 

/*------------------------------------Posting details to Server ends-------------------------------------*/

/*  
        const items = new mongoose.Schema({
   url: {
        type: String,
        required: true  
    },
    title: {
        type: String,
        required: true  
    },
    image: {
        type: String,
        required: true
    },
    shopName: {
        type: String,
        required: true
    },
    price: {
        type: Number,
        required: true  
    },    
    quantity: {
        type: Number,
        required: true  
    },
    totalPrice: {
        type: Number,
        required: true
    }
});

const order = new mongoose.Schema({
    items: [items],
    totalPrice: {
        type: Number,
        required: true  
    },
    shippingAddress: {
        type: String,
        required: true 
    },
    orderDate:{
        type: Date,
        default: Date.now
    },
    shippedDate:{
        type: Date
    },
    shippingFee: {
        type: Number
    },
    feeChargingShops: [],
    totalShopFee: {
        type: Number
    },
    packingFee: {
        type: Number
    },
    grandTotal: {
        type: Number
    },
    trackNumber:{
            type: String, trim: true, index: {
                unique: true,
                partialFilterExpression: {trackNumber: {$type: "string"}}
            }
    },    
    customer: { 
                    type: mongoose.Schema.Types.ObjectId, 
                    ref: 'shoppuUser'
              }

        
              */


}
function confirm(){
        
}
  $(document).ready(function(){

                        // grabbing DOM elements
                  pName = document.getElementById("scrappProduct");
                  pUrl = document.getElementById("scrappUrl");
                  quant = document.getElementById("scrappQuant");                      
                  unitP = document.getElementById("scrappUnitPrice");
                  shipAdd = document.getElementById("scrappShipAdd");
                  email = document.getElementById("scrappEmail");
                  contact = document.getElementById("scrappContact");         

          var current_fs, next_fs, previous_fs; //fieldsets
          var opacity;

          $(".next").click(function(){

          current_fs = $(this).parent();
          next_fs = $(this).parent().next();

          //Add Class Active
          $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

          //show the next fieldset
          next_fs.show();
          //hide the current fieldset with style
          current_fs.animate({opacity: 0}, {
          step: function(now) {
          // for making fielset appear animation
          opacity = 1 - now;

          current_fs.css({
          'display': 'none',
          'position': 'relative'
          });
          next_fs.css({'opacity': opacity});
          },
          duration: 600
          });
          });

          $(".previous").click(function(){

          current_fs = $(this).parent();
          previous_fs = $(this).parent().prev();

          //Remove class active
          $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

          //show the previous fieldset
          previous_fs.show();

          //hide the current fieldset with style
          current_fs.animate({opacity: 0}, {
          step: function(now) {
          // for making fielset appear animation
          opacity = 1 - now;

          current_fs.css({
          'display': 'none',
          'position': 'relative'
          });
          previous_fs.css({'opacity': opacity});
          },
          duration: 600
          });
          });

          $('.radio-group .radio').click(function(){
          $(this).parent().find('.radio').removeClass('selected');
          $(this).addClass('selected');
          });

          $(".submit").click(function(){
          return false;
          })
                      
                      // grabbing DOM elements & adding Event Listeners to it
          
          pUrl.addEventListener("focusout", display);
          document.getElementById("pressNext").addEventListener("click", shiftData);
          document.getElementById("pressAddAnother").addEventListener("click", clearOldData);
          document.getElementById("pressConfirm").addEventListener("click", confirm);          
          document.getElementById("pressStripe").addEventListener("click", placeOrder); 
          
          const formLogIn = document.getElementById("loginForm");
          formLogIn.addEventListener("submit", logInUser);
      
});

</script>