<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Thememinister Health Admin panel</title>

    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="./assets/img/ico/favicon.png" type="image/x-icon">
    

    <!-- Bootstrap -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <!-- Bootstrap rtl -->
    <!--<link href="assets/bootstrap-rtl/bootstrap-rtl.min.css" rel="stylesheet" type="text/css"/>-->
    <!-- Pe-icon-7-stroke -->
    <link href="./assets/pe-icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet" type="text/css"/>
    <!-- style css -->
    <link href="./assets/css/stylehealth.min.css" rel="stylesheet" type="text/css"/>
    <!-- Theme style rtl -->
    <!--<link href="assets/dist/css/stylehealth-rtl.css" rel="stylesheet" type="text/css"/>-->
</head>
<body>

                        <!-- For Testing Only -->
                            <!-- <li><a href="/orderRequest">Order-Request Page</a></li>
                            <br><br><br> -->


    <!-- Content Wrapper -->
    <div class="login-wrapper">
        <!-- <div class="back-link">
            <a href="index.html" class="btn btn-success">Back to Dashboard</a>
        </div> -->
        <div class="container-center">
            <div class="panel panel-bd">
                <div class="panel-heading" style="color: #fdc134;
                background-color: rgba(28, 36, 43, 0.85);
                border-color: #dedada;
                position: relative;
                padding: 10px;">
                    <div class="view-header">
                        <div class="header-icon">
                            <i class="pe-7s-unlock"></i>
                        </div>
                        <div class="header-title">
                            <h3>Login</h3>
                            <small><strong>Please enter your credentials to login.</strong></small>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <form action="index.html" id="loginForm" novalidate>
                        <div class="form-group">
                            <label class="control-label" for="username">e-mail</label>
                            <input type="text" placeholder="example@gmail.com" title="Please enter you username" required="" value="" name="email" id="email" class="form-control">
                            <span class="help-block small">Your unique username to app</span>
                        </div>
                        <div class="form-group">
                            <label class="control-label" for="password">Password</label>
                            <input type="password" title="Please enter your password" placeholder="******" required="" value="" name="password" id="password" class="form-control">
                            <span class="help-block small">Your strong password</span>
                        </div>
                        <div>
                            <button class="btn btn-primary">Login</button>
                            <a class="btn btn-warning" href="register.html">Register</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- /.content-wrapper -->
    <!-- jQuery -->
    <script src="./assets/jquery/jquery-1.12.4.min.js" type="text/javascript"></script>
    <!-- bootstrap js -->
    <script src="./assets/js/bootstrap.min.js" type="text/javascript"></script>

    <script>

            async function logInUser(event){

                            event.preventDefault();

                            const logInEmail = document.getElementById("email").value;                                                
                            const logInPassword = document.getElementById("password").value;

                            const logInResult = await fetch("/logInUser-api", {
                                                                                method: 'POST',
                                                                                headers: {
                                                                                    'Content-Type': 'application/json'
                                                                                },
                                                                                body: JSON.stringify({
                                                                                    logInEmail,
                                                                                    logInPassword                                                                                                                      
                                                                                })                
                                                    }).then(res=>res.json());
                            console.log(logInResult); 
                            //console.log(logInResult.JWT);                               

                            if(logInResult.status === 'ok')
                            {  
                                localStorage.setItem('JWT', logInResult.JWT)
                                //alert("Log-In Successful .. Welcome");
                                window.location = '/';
                            }
                }

                const formLogIn = document.getElementById("loginForm");
                formLogIn.addEventListener("submit", logInUser);


    </script>
</body>
</html>